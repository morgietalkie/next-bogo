"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var config_media_1 = __importDefault(require("config:media"));
var filesize_1 = __importDefault(require("filesize"));
var react_1 = __importDefault(require("react"));
var io_1 = require("react-icons/io");
var AssetBrowserDispatchContext_1 = require("../../contexts/AssetBrowserDispatchContext");
var AssetBrowserStateContext_1 = require("../../contexts/AssetBrowserStateContext");
var Box_1 = __importDefault(require("../Box"));
var Button_1 = __importDefault(require("../Button"));
var Footer = function () {
    var _a, _b;
    var _c = AssetBrowserDispatchContext_1.useAssetBrowserActions(), onDeletePicked = _c.onDeletePicked, onDialogShowCustomFields = _c.onDialogShowCustomFields, onDialogShowRefs = _c.onDialogShowRefs, onSelect = _c.onSelect;
    var items = AssetBrowserStateContext_1.useAssetBrowserState().items;
    var customFields = config_media_1.default.customFields;
    var picked = items && items.filter(function (item) { return item.picked; });
    var singlePickedAsset = picked && picked.length === 1 ? (_a = picked[0]) === null || _a === void 0 ? void 0 : _a.asset : undefined;
    var handleDownloadOriginal = function (asset) {
        window.location.href = asset.url + "?dl";
    };
    return (react_1.default.createElement(Box_1.default, { alignItems: "center", bg: "darkestGray", bottom: 0, color: "lighterGray", display: "flex", flexWrap: "wrap", height: ['headerHeight.0', 'headerHeight.1'], justifyContent: "space-between", left: 0, position: "fixed", width: "100%" },
        react_1.default.createElement(Box_1.default, { display: "flex", flex: "3 0", height: "headerHeight.1", order: [2, 0] }, onSelect && singlePickedAsset && (react_1.default.createElement(Button_1.default, { bleed: true, onClick: function () { return onSelect([{ kind: 'assetDocumentId', value: singlePickedAsset._id }]); } },
            react_1.default.createElement("strong", null, "Select")))),
        react_1.default.createElement(Box_1.default, { height: "headerHeight.1", order: [0, 1], overflow: "hidden", width: ['100%', 'auto'] },
            singlePickedAsset && (react_1.default.createElement(Box_1.default, { alignItems: "center", display: "flex", height: "100%", justifyContent: ['space-between', 'center'], width: "100%" },
                react_1.default.createElement(Box_1.default, { alignItems: "center", display: "flex", flexDirection: "row", ml: [1, 0], minWidth: 0, whiteSpace: "nowrap" },
                    react_1.default.createElement(Box_1.default, { color: "lightGray", maxWidth: [null, '420px'], mx: 2, overflow: "hidden", textOverflow: "ellipsis" },
                        react_1.default.createElement("strong", null, singlePickedAsset.originalFilename)),
                    ((_b = singlePickedAsset.metadata) === null || _b === void 0 ? void 0 : _b.dimensions) && (react_1.default.createElement(Box_1.default, { color: "lightGray", mx: 2 },
                        singlePickedAsset.metadata.dimensions.width,
                        " x",
                        ' ',
                        singlePickedAsset.metadata.dimensions.height)),
                    react_1.default.createElement(Box_1.default, { color: "lightGray", mx: 2 }, filesize_1.default(singlePickedAsset.size, { round: 0 })),
                    react_1.default.createElement(Box_1.default, { borderColor: "lightGray", borderStyle: "solid", borderWidth: "1px", borderRadius: "2px", color: "lightGray", display: ['none', 'block'], fontSize: 1, mx: 2, px: 1 }, singlePickedAsset.extension.toUpperCase())),
                react_1.default.createElement(Box_1.default, { alignItems: "center", display: "flex", height: "100%" },
                    customFields && customFields.length > 0 && (react_1.default.createElement(Button_1.default, { bleed: true, onClick: onDialogShowCustomFields.bind(null, singlePickedAsset) },
                        react_1.default.createElement(io_1.IoMdCreate, { size: 16 }))),
                    react_1.default.createElement(Button_1.default, { bleed: true, onClick: onDialogShowRefs.bind(null, singlePickedAsset) },
                        react_1.default.createElement(io_1.IoIosLink, { size: 16 })),
                    react_1.default.createElement(Button_1.default, { bleed: true, onClick: handleDownloadOriginal.bind(null, singlePickedAsset) },
                        react_1.default.createElement(io_1.IoIosDownload, { size: 16 }))))),
            picked.length > 1 && (react_1.default.createElement(Box_1.default, { alignItems: "center", color: "lighterGray", display: "flex", height: "headerHeight.1", mx: 3 },
                picked.length,
                " images selected"))),
        react_1.default.createElement(Box_1.default, { display: "flex", flex: "3 0", height: "headerHeight.1", justifyContent: "flex-end", order: [2, 2] }, picked.length > 0 && (react_1.default.createElement(Button_1.default, { bleed: true, onClick: onDeletePicked, variant: "danger" },
            react_1.default.createElement("strong", null,
                "Delete",
                picked.length > 1 ? " " + picked.length + " images" : ''))))));
};
exports.default = Footer;
